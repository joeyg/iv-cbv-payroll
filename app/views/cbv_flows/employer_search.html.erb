<% content_for :head do %>
  <%= tag :meta, name: :argyle_user_token, content: @argyle_user_token %>
  <%= tag :meta, name: :argyle_sandbox, content: ENV['ARGYLE_SANDBOX'] %>
<% end %>

<h2>Get payment info from your employer.</h2>

<div data-controller="cbv-flows">
  <h3 class="site-preview-heading">Search for an employer</h3>
  <%= form_with url: next_path, method: :post, class: 'usa-search usa-search--big', html: { role: 'search' }, data: { 'cbv-flows-target': "form" } do |f| %>
    <label class="usa-sr-only" for="employer-search">
      Search for your employer
    </label>
    <input
      class="usa-input margin-bottom-3"
      type="search"
      id="employer-search"
      name="employer-search"
      data-cbv-flows-target="searchTerms"
    />
    <button
      data-action="click->cbv-flows#search"
      class="usa-button"
      type="submit"
    >
      <span class="usa-search__submit-text">
        Search
      </span>
      <%= image_tag "@uswds/uswds/dist/img/usa-icons-bg/search--white.svg", class: "usa-search__submit-icon", alt: "Search" %>
    </button>
  <% end %>

  <h3 class="site-preview-heading margin-0">Results</h3>
  <ul class="usa-list usa-list--unstyled" data-cbv-flows-target="results">
    <!-- Results will be added here -->
  </ul>

  <div class="margin-y-3">
    <div
      class="usa-modal"
      id="example-modal-3"
      aria-labelledby="modal-3-heading"
      aria-describedby="modal-3-description"
      data-force-action
    >
      <div class="usa-modal__content">
        <div class="usa-modal__main">
          <h2 class="usa-modal__heading" id="modal-3-heading">
            We are fetching your employer's payment information.
          </h2>
          <div class="usa-prose">
            <p id="modal-3-description">
              This may take a few minutes. Please do not close this window.
            </p>
          </div>
          <div class="lds-ripple" style="left: 30%;"><div></div><div></div></div>
        </div>
      </div>
    </div>
  </div>
</div>
